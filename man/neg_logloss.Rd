% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/utils.R
\name{neg_logloss}
\alias{neg_logloss}
\title{Weighted negative log loss for discretized mass estimates}
\usage{
neg_logloss(mass_mat, bw, w, eps = 1e-15)
}
\arguments{
\item{mass_mat}{Numeric matrix of nonnegative mass or density values.
Each column is assumed to be mass evaluated at a different set of tuning parameters.}

\item{bw}{Numeric vector of bin widths. Recycled across columns of \code{mass_mat} as needed.}

\item{w}{Numeric vector of nonnegative observation weights, with
\code{length(w) == nrow(mass_mat)}.}

\item{eps}{Small positive constant used to floor \code{mass_mat} values before
taking logs, to avoid \code{-Inf}.}
}
\value{
Numeric vector of length \code{ncol(mass_mat)} giving the weighted
  negative log loss for each column.
}
\description{
Computes a weighted negative log loss for each column of a mass matrix,
with a bin-width adjustment. Intended for evaluating discretized density 
or probability mass estimates.
}
\details{
The loss is computed as
\deqn{
\frac{1}{\sum_i w_i} \sum_i w_i \left\{ -\log(m_{ij}) + \log(bw_i) \right\},
}
where `m_{ij}` is the mass in row `i`, column `j`. Values of `mass_mat`
smaller than `eps` are truncated to `eps`.
}
